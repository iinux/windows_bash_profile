#! /bin/sh
date
echo 'monitor start ...'
process_name='notepad'
while [ 1 ]; do
    date
    cpu=`wmic path Win32_PerfFormattedData_PerfProc_Process get Name,PercentProcessorTime | grep $process_name | awk '{print $2}'`
    echo "cpu is $cpu"
    if [[ $cpu -le 99 ]]; then
        echo 'no'
        utf taskkill -f -im $process_name.exe -t
        #/d/ZKTime5.0/Att.exe &
        $process_name &
    else
        echo 'ok'
    fi
    sleep 5
done
